{"version":3,"sources":["../../src/models/admin.js"],"names":["Admin","Schema","firstName","String","lastName","userName","passWord","role","type","Number","min","max","mobile","token","adminTable","mongoose","model","_SignInAdmin","findOne","exec","err","user","_id","save","_createAdmin","dataAdmin","_adminTable","data","_getAdminByUser","_getAllAdmin","find","_deleteAdmin","remove","_getAdminById","_editAdmin","findOneAndUpdate","new"],"mappings":"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","file":"admin.js","sourcesContent":["import mongoose, { Mongoose, Schema } from 'mongoose';\r\nimport { generateToken, generateTokenUser } from '../lib/util';\r\nimport md5 from 'md5';\r\n\r\nlet Admin = new Schema({\r\n    firstName: String,\r\n    lastName: String,\r\n    userName: String,\r\n    passWord: String,\r\n    role: { type: Number, min: 1, max: 3 }, //1: SuperAdmin, 2: Design, 3: Hr;\r\n    mobile: Number,\r\n    token: String,\r\n})\r\nconst adminTable = mongoose.model('Admin', Admin);\r\n//signIn\r\nexport const _SignInAdmin = (userName, passWord) => {\r\n    return adminTable.findOne({ userName, passWord: md5(passWord) })\r\n        .exec((err, user) => {\r\n            if (err) {\r\n                return (\"Username or password is not exitst\");\r\n            } else if (user) {\r\n                let token = generateTokenUser(userName, user.role, user._id);\r\n                user.token = token;\r\n                user.save();\r\n                return user\r\n            } else {\r\n                return (\"System error in Authentication\")\r\n            }\r\n        })\r\n}\r\n//create admin\r\nexport const _createAdmin = (dataAdmin) => {\r\n    const _adminTable = new adminTable({\r\n        firstName: dataAdmin.firstName,\r\n        lastName: dataAdmin.lastName,\r\n        userName: dataAdmin.userName,\r\n        passWord: md5(dataAdmin.passWord),\r\n        role: dataAdmin.role, //1: SuperAdmin, 2: Design, 3: Hr;\r\n        mobile: dataAdmin.mobile,\r\n    });\r\n    return _adminTable.save((err, data) => {\r\n        if (err) {\r\n            return ('Admin Create Error!');\r\n        } else {\r\n            return data;\r\n        }\r\n    })\r\n}\r\n//get admin by User\r\nexport const _getAdminByUser = (userName) => {\r\n    return adminTable.findOne({ userName })\r\n        .exec((err, data) => {\r\n            if (err) {\r\n                return ('Get data admin error!')\r\n            } else {\r\n                return data;\r\n            }\r\n        })\r\n}\r\n//getAllAdmin\r\nexport const _getAllAdmin = () => {\r\n    return adminTable.find()\r\n        .exec((err, data) => {\r\n            if (err) {\r\n                return ('Get Data Admin Error!')\r\n            } else {\r\n                return data\r\n            }\r\n        })\r\n}\r\n//delete admin \r\nexport const _deleteAdmin = (_id) => {\r\n    return adminTable.remove({ _id }, (err => {\r\n        if (err) {\r\n            return err;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }))\r\n}\r\n//getAdminById\r\nexport const _getAdminById = (_id) => {\r\n    return adminTable.findOne({ _id })\r\n        .exec((err, data) => {\r\n            if (err) {\r\n                return ('Get Admin Error!')\r\n            } else {\r\n                return data;\r\n            }\r\n        })\r\n}\r\nexport const _editAdmin = (_id, dataAdmin) => {\r\n    return adminTable.findOneAndUpdate({ _id }, {\r\n        firstName: dataAdmin.firstName,\r\n        lastName: dataAdmin.lastName,\r\n        role: dataAdmin.role,\r\n        mobile: dataAdmin.mobile,\r\n    }, { new: true }).exec((err, data) => {\r\n        if (err) {\r\n            return ('Update Admin Error!')\r\n        } else {\r\n            return data;\r\n        }\r\n    })\r\n}"]}